<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Document</title>

	<!-- css -->
	<link rel="stylesheet" type="text/css" href="../css/index.css">

</head>

<body>

	<div id="root" class="contain" style="border:1px solid saddlebrown">

	</div>
	

	<!-- js -->
	<script type="text/javascript" charset="utf-8" src="../js/plugins/JQuery/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="../js/plugins/react/react.development.js"></script>
	<script type="text/javascript" charset="utf-8" src="../js/plugins/react/react-dom.development.js"></script>
	<script type="text/javascript" charset="utf-8" src="../js/plugins/react/babel.min.js"></script>
	<script type="text/babel">

			class Lilist extends React.Component{
				constructor(props){
					super(props);
					this.onliclick = this.onliclick.bind(this);
				}

				onliclick(){
					// let {onClick,index} = this.props;
					// onClick(index);

					this.props.onClick(this.props.index)
				}

				render(){
					let item = this.props.item;
					return(
						<li onClick={this.onliclick.bind(this)}>{item}</li>
					)
				}
			}

			class App extends React.Component{
				constructor(props){
					super(props);
					this.state = {
						arr:[],
						value:'',
						ref:React.createRef()
					}
				}
				
				onclick(){
					this.setState({
						arr:[...this.state.arr,this.state.value],
						value:''
					})
					// document.getElementsByTagName('input')[0].focus();
				}
				
				onchange(val,e){
					console.log(e);
					console.log(val);
					this.setState({
						value:e.target.value
					})
				}
				onliclick(val,e){
					console.log(e);
					console.log(val);
					var arr = this.state.arr.slice();
					arr.splice(val,1);
					this.setState({arr})
				}

				componentDidMount() {
					console.log(React)
					// document.getElementsByTagName('input')[0].focus();
					this.state.ref.current.focus();
				}
				
				render(){
					return(
						<div>
							<div>
								<input type="text" value={this.state.value} onChange={this.onchange.bind(this,1)} ref={this.state.ref} />
								<button onClick = {this.onclick.bind(this)}>add</button>
							</div>
							<ul>
								{
									this.state.arr.map((item,index) => {
										return <Lilist hidden key={index} onClick={this.onliclick.bind(this,index)} index={index} item = {item}/>
										// return <li key={index} onClick={this.onliclick.bind(this,index)}>{item}</li>
									})
								}
							</ul>
						</div>
					)
				}
			}
			
			ReactDOM.render(
				<App />,
				document.getElementById('root')
				
			)
		</script>
</body>

</html>