<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <canvas id="canvas" width="400" height="400"></canvas>
    <button onclick="clearCanvas()">清除</button>
    <script>
        var canvas = document.getElementById("canvas");//演员
        var context = canvas.getContext("2d");//舞台
        var isMousedown = false;
        var startLoc = { x: 0, y: 0 };
        function clearCanvas() {
            context.clearRect(0, 0, 400, 400);
            draw();
        }
        draw();//绘制一个米字格
        function getPoint(clientX, clientY) {
            var bbox = canvas.getBoundingClientRect();
            return { x: clientX - bbox.left, y: clientY - bbox.top };
        }
        canvas.onmousedown = function (e) {
            isMousedown = true;
            startLoc = getPoint(e.clientX, e.clientY);//获取到起点相对于canvas的坐标
        }
        canvas.onmouseup = function () {
            isMousedown = false;
        }
        canvas.onmouseout = function () {
            isMousedown = false;
        }
        canvas.onmousemove = function (e) {
            if (isMousedown) {
                var endLoc = getPoint(e.clientX, e.clientY);//获取到终点相对于canvas的坐标
                context.beginPath();
                context.moveTo(startLoc.x, startLoc.y);
                context.lineTo(endLoc.x, endLoc.y);
                context.lineWidth = 20;
                context.stroke();
                context.lineJoin = "round";
                context.lineCap = "round";
                startLoc = endLoc;
            }
        }
        function draw() {
            context.strokeStyle = "#f00";
            context.lineWidth = 1;
            context.beginPath();
            context.moveTo(0, 0);
            context.lineTo(400, 0);
            context.lineTo(400, 400);
            context.lineTo(0, 400);
            context.closePath();
            context.stroke();//执行绘制
            context.beginPath();
            context.moveTo(0, 0);
            context.lineTo(400, 400);
            context.moveTo(400, 0);
            context.lineTo(0, 400);
            context.moveTo(200, 0);
            context.lineTo(200, 400);
            context.moveTo(0, 200);
            context.lineTo(400, 200);
            context.stroke();//执行绘制
        }
    </script>
</body>

</html>