<!DOCTYPE html>
<html>
  <head>
    <title>react</title>
    <meta charset="UTF-8" />
    <script src="js/react.development.js"></script>
    <script src="js/react-dom.development.js"></script>
    <script type="text/javascript" src="js/babel.min.js"></script>
    <script type="text/javascript" src="js/axios.js"></script>
  </head>
  <body>
    <div id="my"></div>

    <script type="text/babel">
    //ES6  class
    class List extends React.Component {
      constructor(){
        super();
        this.state ={
         data:[]
        }
      }
      handleClick(){
        axios({
          method:'get',
          url:'http://localhost:3333/get_list'
        }).then((res)=>{
          console.log(res);
          if(res.data.code=='200'){
            this.setState({
              data:res.data.result
            })
          }
        }).catch((error)=>{
          console.log(error);
        })
      }
      render(){ 
        var info={
          state:0
        }
        return (
          <div>
            <button onClick={()=>this.handleClick()}>click</button>
            <ul>
              {
                this.state.data.map((item,index)=>{
                    return <li key={index}>{item.name}</li>
                })
              }
            </ul>
          </div>
        )
      }
    };
    
    ReactDOM.render(
      <div>
        <List></List>
      </div>,
      document.getElementById("my")
    );

    
    </script>
  </body>
</html>
